<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (c) 2014-2015, Javier Vaquero

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    required by applicable law or agreed to in writing, software
    under the License is distributed on an "AS IS" BASIS,
    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    the License for the specific language governing permissions and
    under the License.

-->
<!-- Copyright (c) 2014-2015, Javier Vaquero Licensed under the Apache License, 
	Version 2.0 (the "License"); you may not use this file except in compliance 
	with the License. may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 
	required by applicable law or agreed to in writing, software under the License 
	is distributed on an "AS IS" BASIS, WARRANTIES OR CONDITIONS OF ANY KIND, 
	either express or implied. the License for the specific language governing 
	permissions and under the License. -->
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/context	http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/mvc		http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
                           ">


	<!-- **************************************************************** -->
	<!-- RESOURCE FOLDERS CONFIGURATION -->
	<!-- Dispatcher configuration for serving static resources -->
	<!-- **************************************************************** -->
	<mvc:resources location="/img/" mapping="/img/**" />
	<mvc:resources location="/css/" mapping="/css/**" />
	<mvc:resources location="/js/" mapping="/js/**" />


	<!-- **************************************************************** -->
	<!-- SPRING ANNOTATION PROCESSING -->
	<!-- **************************************************************** -->
	<!-- <mvc:annotation-driven conversion-service="conversionService" /> -->
	<mvc:annotation-driven />
	<context:component-scan base-package="es.magDevs.myLibrary" />

	<!-- **************************************************************** -->
	<!-- MESSAGE EXTERNALIZATION/INTERNATIONALIZATION -->
	<!-- Standard Spring MessageSource implementation -->
	<!-- **************************************************************** -->
	<bean id="messageSource"
		class="org.springframework.context.support.ResourceBundleMessageSource">
		<property name="basenames" value="Messages,configuration" />
	</bean>
	<bean id="localeResolver"
		class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
		<property name="defaultLocale" value="es" />
	</bean>
	<mvc:interceptors>
		<bean id="localeChangeInterceptor"
			class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
			<property name="paramName" value="language" />
		</bean>
	</mvc:interceptors>


	<!-- **************************************************************** -->
	<!-- THYMELEAF-SPECIFIC ARTIFACTS -->
	<!-- TemplateResolver <- TemplateEngine <- ViewResolver -->
	<!-- **************************************************************** -->

	<bean id="templateResolver"
		class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
		<property name="prefix" value="/WEB-INF/templates/" />
		<property name="suffix" value=".html" />
		<property name="templateMode" value="HTML5" />
		<property name="characterEncoding" value="UTF-8" />
		<!-- Template cache is true by default. Set to false if you want -->
		<!-- templates to be automatically updated when modified. -->
		<property name="cacheable" value="false" />
	</bean>

	<bean id="templateEngine" class="org.thymeleaf.spring4.SpringTemplateEngine">
		<property name="templateResolver" ref="templateResolver" />
	</bean>

<!-- THIS ITS DONE IN LiteDeviceDelegatingViewResolver INIT-->
<!-- 	<bean class="org.thymeleaf.spring4.view.ThymeleafViewResolver"> -->
<!-- 		<property name="templateEngine" ref="templateEngine" /> -->
<!-- 		<property name="characterEncoding" value="UTF-8" /> -->
<!-- 	</bean> -->

	<!-- **************************************************************** -->
	<!-- DEVICE DETECTION / RESPONSIVE APP -->
	<!-- DeviceResolverHandlerInterceptor -->
	<!-- **************************************************************** -->
	<mvc:interceptors>
		<!-- On pre-handle, resolve the device that originated the web request -->
		<bean
			class="org.springframework.mobile.device.DeviceResolverHandlerInterceptor" />
	</mvc:interceptors>
	<bean
		class="org.springframework.mobile.device.view.LiteDeviceDelegatingViewResolver">
		<constructor-arg>
			<bean class="org.thymeleaf.spring4.view.ThymeleafViewResolver">
				<property name="templateEngine" ref="templateEngine" />
				<property name="characterEncoding" value="UTF-8" />
			</bean>
		</constructor-arg>
		<property name="mobilePrefix" value="mobile/" />
		<property name="tabletPrefix" value="mobile/" />
	</bean>
</beans>


